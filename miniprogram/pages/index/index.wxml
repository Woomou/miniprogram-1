<!--index.wxml-->
<navigation-bar title="Weixin" back="{{false}}" color="black" background="#FFF"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <view class="welcome-section">
      <view class="logo">
        <text class="logo-icon">🎤</text>
      </view>
      <text class="title">英语读音测试</text>
      <text class="subtitle">提升您的英语发音准确度</text>
    </view>

    <!-- 将手写识别区块提前，开屏即可看到 -->
    <view class="words-section">
      <text class="section-title">单词手写识别</text>
      <view class="home-word-item" wx:for="{{words}}" wx:key="id">
        <view class="home-word-row">
          <view class="home-word-info">
            <text class="home-word">{{item.word}}</text>
            <text class="home-phonetic">{{item.phonetic}}</text>
          </view>
          <button class="hw-btn" size="mini" catchtap="togglePad" data-id="{{item.id}}">手写</button>
        </view>
        <view wx:if="{{showPadMap[item.id]}}" class="hw-panel">
          <view class="hw-header">
            <text>手写识别（{{item.word}}）</text>
            <button class="clear-btn" size="mini" catchtap="clearPad" data-id="{{item.id}}">清空</button>
          </view>
          <canvas
            class="hw-canvas"
            canvas-id="home-canvas-{{item.id}}"
            disable-scroll="true"
            bindtouchstart="onCanvasTouchStart"
            bindtouchmove="onCanvasTouchMove"
            bindtouchend="onCanvasTouchEnd"
            bindtouchcancel="onCanvasTouchEnd"
            data-id="{{item.id}}"
            style="width: 680rpx; height: 360rpx;"
          ></canvas>
          <view class="result">
            <text>识别结果：{{recognizeResultMap[item.id] || '…'}}</text>
          </view>
        </view>
      </view>
    </view>

    <view class="features">
      <view class="feature-item">
        <text class="feature-icon">📚</text>
        <text class="feature-title">丰富单词库</text>
        <text class="feature-desc">包含多个难度等级的英语单词</text>
      </view>
      
      <view class="feature-item">
        <text class="feature-icon">🎯</text>
        <text class="feature-title">精准识别</text>
        <text class="feature-desc">智能分析您的发音准确度</text>
      </view>
      
      <view class="feature-item">
        <text class="feature-icon">💡</text>
        <text class="feature-title">智能反馈</text>
        <text class="feature-desc">提供个性化的发音改进建议</text>
      </view>
    </view>

    <view class="action-section">
      <button class="start-btn" bindtap="startTest">开始测试</button>
      <text class="tip">点击开始，选择单词进行读音测试</text>
    </view>
  </view>
</scroll-view>
